import { commandNames, filterType, objectTypes } from '../consts';
import { getFilterType } from '../utils';
export var HistoryItemType;
(function (HistoryItemType) {
    HistoryItemType[HistoryItemType["Shape"] = 0] = "Shape";
    HistoryItemType[HistoryItemType["Icon"] = 1] = "Icon";
    HistoryItemType[HistoryItemType["Text"] = 2] = "Text";
    HistoryItemType[HistoryItemType["Mask"] = 3] = "Mask";
    HistoryItemType[HistoryItemType["Crop"] = 4] = "Crop";
    HistoryItemType[HistoryItemType["Draw"] = 5] = "Draw";
    HistoryItemType[HistoryItemType["Rotate"] = 6] = "Rotate";
    HistoryItemType[HistoryItemType["Flip"] = 7] = "Flip";
    HistoryItemType[HistoryItemType["Load"] = 8] = "Load";
    HistoryItemType[HistoryItemType["Delete"] = 9] = "Delete";
    HistoryItemType[HistoryItemType["Image"] = 10] = "Image";
    HistoryItemType[HistoryItemType["ApplyFilter"] = 11] = "ApplyFilter";
    HistoryItemType[HistoryItemType["RemoveFilter"] = 12] = "RemoveFilter";
})(HistoryItemType || (HistoryItemType = {}));
export class HistoryItem {
    constructor(command, translationService, imageEditor) {
        var _a, _b, _c, _d;
        if (typeof command === 'string') {
            if (command === commandNames.TEXT) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-text-general');
                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-details');
                this.type = HistoryItemType.Text;
            }
            else if (command === commandNames.MASK) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-mask-general');
                this.detail = translationService.getTranslation('tui-image-editor-angular-history-mask-details');
                this.type = HistoryItemType.Mask;
            }
            else if (command === commandNames.CROP) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-crop');
                this.type = HistoryItemType.Crop;
            }
            else if (command === commandNames.DRAW) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-draw-general');
                this.detail = translationService.getTranslation('tui-image-editor-angular-history-draw-details');
                this.type = HistoryItemType.Draw;
            }
            else if (command === commandNames.ICON) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-icon-general');
                this.detail = translationService.getTranslation('tui-image-editor-angular-history-icon-details');
                this.type = HistoryItemType.Icon;
            }
            else if (command === commandNames.LOAD) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-load');
                this.type = HistoryItemType.Load;
            }
            else if (command === commandNames.SHAPE) {
                this.name = translationService.getTranslation('tui-image-editor-angular-history-shape-general');
                this.detail = translationService.getTranslation('tui-image-editor-angular-history-shape-details');
                this.type = HistoryItemType.Shape;
            }
            else {
                this.name = command;
            }
        }
        else {
            switch (command.name) {
                case commandNames.FLIP_IMAGE:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-flip');
                    switch (command.args[1]) {
                        case 'reset':
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-flip-reset');
                            break;
                        case 'flipX':
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-flip-flipX');
                            break;
                        case 'flipY':
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-flip-flipY');
                            break;
                    }
                    this.type = HistoryItemType.Flip;
                    break;
                case commandNames.ROTATE_IMAGE:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-rotate');
                    this.detail = command.args[2] + 'Â°';
                    this.type = HistoryItemType.Rotate;
                    this.args = [command.args[2]];
                    break;
                case commandNames.APPLY_FILTER:
                    if (((_a = command.args) === null || _a === void 0 ? void 0 : _a.length) >= 3 && command.args[1] === 'mask') {
                        this.name = translationService.getTranslation('tui-image-editor-angular-history-mask-general');
                        this.detail = translationService.getTranslation('tui-image-editor-angular-history-mask-apply');
                        this.type = HistoryItemType.Mask;
                    }
                    else {
                        this.name = translationService.getTranslation('tui-image-editor-angular-history-applyFilter');
                        this.detail = getFilterType(command.args[1], command.args[2]);
                        this.type = HistoryItemType.ApplyFilter;
                        if (command.args[1] === filterType.REMOVE_COLOR &&
                            command.args[2] != null) {
                            this.filterType =
                                command.args[2].useAlpha == null
                                    ? filterType.REMOVE_COLOR
                                    : filterType.REMOVE_WHITE;
                            this.detail =
                                command.args[2].useAlpha == null
                                    ? translationService.getTranslation('tui-image-editor-angular-submenus-filter-colorFilter')
                                    : translationService.getTranslation('tui-image-editor-angular-submenus-filter-removeWhite');
                            this.args = [command.args[2].distance];
                        }
                        else if (command.args[1] === filterType.BLEND_COLOR &&
                            command.args[2] != null) {
                            if (command.args[2].mode === 'tint') {
                                this.filterType = filterType.TINT;
                                this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-tint');
                            }
                            else if (command.args[2].mode === 'multiply') {
                                this.filterType = filterType.MULTIPLY;
                                this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-multiply');
                            }
                            else if (command.args[2].mode === 'add') {
                                this.filterType = filterType.BLEND;
                                this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-blend');
                            }
                            this.args = [command.args[2].color];
                        }
                        else if (command.args[1] === filterType.NOISE &&
                            command.args[2] != null) {
                            this.filterType = filterType.NOISE;
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-noise');
                            this.args = [command.args[2].noise];
                        }
                        else if (command.args[1] === filterType.BRIGHTNESS &&
                            command.args[2] != null) {
                            this.filterType = filterType.BRIGHTNESS;
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-brightness');
                            this.args = [command.args[2].brightness];
                        }
                        else if (command.args[1] === filterType.PIXELATE &&
                            command.args[2] != null) {
                            this.filterType = filterType.PIXELATE;
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-pixelate');
                            this.args = [command.args[2].blocksize];
                        }
                        else if (command.args[1] === filterType.GRAYSCALE) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-grayscale');
                        }
                        else if (command.args[1] === filterType.SEPIA) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-sepia');
                        }
                        else if (command.args[1] === filterType.BLUR) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-blur');
                        }
                        else if (command.args[1] === filterType.INVERT) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-invert');
                        }
                        else if (command.args[1] === filterType.VINTAGE) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-sepia2');
                        }
                        else if (command.args[1] === filterType.SHARPEN) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-sharpen');
                        }
                        else if (command.args[1] === filterType.EMBOSS) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-emboss');
                        }
                    }
                    break;
                case commandNames.REMOVE_FILTER:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-removeFilter');
                    if (command.args[1] === filterType.BLEND_COLOR) {
                        this.filterType = filterType.BLEND_OR_TINT_OR_MULTIPLY;
                        this.detail = `${translationService.getTranslation('tui-image-editor-angular-submenus-filter-tint')} | ${translationService.getTranslation('tui-image-editor-angular-submenus-filter-multiply')} | ${translationService.getTranslation('tui-image-editor-angular-submenus-filter-blend')}`;
                    }
                    else if (command.args[1] === filterType.REMOVE_COLOR) {
                        this.filterType = filterType.REMOVE_COLOR_OR_WHITE;
                        this.detail = `${translationService.getTranslation('tui-image-editor-angular-submenus-filter-removeWhite')} | ${translationService.getTranslation('tui-image-editor-angular-submenus-filter-colorFilter')}`;
                    }
                    else if (command.args[1] === filterType.GRAYSCALE) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-grayscale');
                    }
                    else if (command.args[1] === filterType.SEPIA) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-sepia');
                    }
                    else if (command.args[1] === filterType.BLUR) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-blur');
                    }
                    else if (command.args[1] === filterType.INVERT) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-invert');
                    }
                    else if (command.args[1] === filterType.VINTAGE) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-sepia2');
                    }
                    else if (command.args[1] === filterType.SHARPEN) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-sharpen');
                    }
                    else if (command.args[1] === filterType.EMBOSS) {
                        this.detail = translationService.getTranslation('tui-image-editor-angular-submenus-filter-emboss');
                    }
                    this.type = HistoryItemType.RemoveFilter;
                    break;
                case commandNames.CHANGE_SHAPE:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-shape-general');
                    if (((_b = command.args) === null || _b === void 0 ? void 0 : _b.length) >= 3) {
                        let changedProperties = command.args[2];
                        if (changedProperties.strokeWidth) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-shape-strokeWidth');
                        }
                        else if (changedProperties.stroke) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-shape-stroke');
                        }
                        else if (changedProperties.fill) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-shape-fill');
                        }
                    }
                    this.type = HistoryItemType.Shape;
                    break;
                case commandNames.CHANGE_ICON_COLOR:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-icon-general');
                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-icon-colorChange');
                    this.type = HistoryItemType.Icon;
                    break;
                case commandNames.CHANGE_TEXT_STYLE:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-text-general');
                    this.type = HistoryItemType.Text;
                    if (((_c = command.args) === null || _c === void 0 ? void 0 : _c.length) >= 3 &&
                        typeof command.args[2] === 'object') {
                        let textStyleArg = command.args[2];
                        if (textStyleArg.textAlign) {
                            switch (textStyleArg.textAlign) {
                                case 'left':
                                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-textAlignment-left');
                                    break;
                                case 'center':
                                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-textAlignment-center');
                                    break;
                                case 'right':
                                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-textAlignment-right');
                                    break;
                            }
                        }
                        else if (textStyleArg.textDecoration ||
                            textStyleArg.underline != null) {
                            if (textStyleArg.underline) {
                                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-underline-true');
                            }
                            else if (textStyleArg.underline === false) {
                                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-underline-false');
                            }
                        }
                        else if (textStyleArg.fontStyle) {
                            if (textStyleArg.fontStyle === 'normal') {
                                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-fontStyle-normal');
                            }
                            else if (textStyleArg.fontStyle === 'italic') {
                                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-fontStyle-italic');
                            }
                        }
                        else if (textStyleArg.fontWeight) {
                            if (textStyleArg.fontWeight === 'normal') {
                                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-fontWeight-normal');
                            }
                            else if (textStyleArg.fontWeight === 'bold') {
                                this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-fontWeight-bold');
                            }
                        }
                        else if (textStyleArg.fontSize) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-styleChange-fontSize', { 0: textStyleArg.fontSize });
                        }
                        else if (textStyleArg.fill) {
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-fill');
                        }
                    }
                    break;
                case commandNames.REMOVE_OBJECT:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-delete');
                    switch (command.args[2]) {
                        case commandNames.DRAW:
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-delete-draw');
                            break;
                        case commandNames.SHAPE:
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-delete-shape');
                            break;
                        case commandNames.ICON:
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-delete-icon');
                            break;
                        case commandNames.TEXT:
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-delete-text');
                            break;
                        case commandNames.MASK:
                            this.detail = translationService.getTranslation('tui-image-editor-angular-history-delete-mask');
                            break;
                    }
                    this.type = HistoryItemType.Delete;
                    break;
                case commandNames.CLEAR_OBJECTS:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-delete');
                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-delete-all');
                    this.type = HistoryItemType.Delete;
                    break;
                case commandNames.ADD_IMAGE_OBJECT:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-mask-general');
                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-mask-added');
                    this.type = HistoryItemType.Image;
                    break;
                case commandNames.ADD_TEXT:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-text-general');
                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-text-added');
                    this.type = HistoryItemType.Text;
                    break;
                case commandNames.SET_OBJECT_PROPERTIES:
                    if (((_d = command.args) === null || _d === void 0 ? void 0 : _d.length) >= 3) {
                        let objectId = command.args[1];
                        var props = imageEditor === null || imageEditor === void 0 ? void 0 : imageEditor.getObjectProperties(objectId, ['type']);
                        console.debug(props);
                        if (props === null || props === void 0 ? void 0 : props.type) {
                            if ([objectTypes.line, objectTypes.straightLine].indexOf(props.type) > -1) {
                                this.name = translationService.getTranslation('tui-image-editor-angular-history-draw-general');
                                this.type = HistoryItemType.Draw;
                                let changedProperties = command.args[2];
                                if (changedProperties === null || changedProperties === void 0 ? void 0 : changedProperties.strokeWidth) {
                                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-draw-strokeWidth', { 0: changedProperties.strokeWidth });
                                }
                                else if (changedProperties === null || changedProperties === void 0 ? void 0 : changedProperties.stroke) {
                                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-draw-stroke');
                                }
                            }
                            else if (props.type === objectTypes.icon) {
                                this.name = translationService.getTranslation('tui-image-editor-angular-history-icon-general');
                                this.type = HistoryItemType.Icon;
                                let changedProperties = command.args[2];
                                if (changedProperties === null || changedProperties === void 0 ? void 0 : changedProperties.fill) {
                                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-icon-fill');
                                }
                            }
                        }
                    }
                    break;
                case commandNames.ADD_ICON:
                    this.name = translationService.getTranslation('tui-image-editor-angular-history-icon-general');
                    this.detail = translationService.getTranslation('tui-image-editor-angular-history-icon-added');
                    this.type = HistoryItemType.Icon;
                    break;
                default:
                    this.name = command.name;
                    break;
            }
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzdG9yeS1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdHVpLWltYWdlLWVkaXRvci1hbmd1bGFyL3NyYy9saWIvaW50ZXJmYWNlcy9oaXN0b3J5LWl0ZW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQWdCLFdBQVcsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVoRixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBR3pDLE1BQU0sQ0FBTixJQUFZLGVBY1g7QUFkRCxXQUFZLGVBQWU7SUFDekIsdURBQVMsQ0FBQTtJQUNULHFEQUFRLENBQUE7SUFDUixxREFBUSxDQUFBO0lBQ1IscURBQVEsQ0FBQTtJQUNSLHFEQUFRLENBQUE7SUFDUixxREFBUSxDQUFBO0lBQ1IseURBQVUsQ0FBQTtJQUNWLHFEQUFRLENBQUE7SUFDUixxREFBUSxDQUFBO0lBQ1IseURBQVUsQ0FBQTtJQUNWLHdEQUFVLENBQUE7SUFDVixvRUFBZ0IsQ0FBQTtJQUNoQixzRUFBaUIsQ0FBQTtBQUNuQixDQUFDLEVBZFcsZUFBZSxLQUFmLGVBQWUsUUFjMUI7QUFFRCxNQUFNLE9BQU8sV0FBVztJQU90QixZQUNFLE9BQXlCLEVBQ3pCLGtCQUFzQyxFQUN0QyxXQUFnQjs7UUFFaEIsSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUU7WUFDL0IsSUFBSSxPQUFPLEtBQUssWUFBWSxDQUFDLElBQUksRUFBRTtnQkFDakMsSUFBSSxDQUFDLElBQUksR0FBRyxrQkFBa0IsQ0FBQyxjQUFjLENBQzNDLCtDQUErQyxDQUNoRCxDQUFDO2dCQUNGLElBQUksQ0FBQyxNQUFNLEdBQUcsa0JBQWtCLENBQUMsY0FBYyxDQUM3QywrQ0FBK0MsQ0FDaEQsQ0FBQztnQkFDRixJQUFJLENBQUMsSUFBSSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUM7YUFDbEM7aUJBQU0s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QUFlLENBQUMsSUFBSSxDQUFDO2dDQUNqQyxJQUFJLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hDLElBQUksaUJBQWlCLGFBQWpCLGlCQUFpQix1QkFBakIsaUJBQWlCLENBQUUsSUFBSSxFQUFFO29DQUMzQixJQUFJLENBQUMsTUFBTSxHQUFHLGtCQUFrQixDQUFDLGNBQWMsQ0FDN0MsNENBQTRDLENBQzdDLENBQUM7aUNBQ0g7NkJBQ0Y7eUJBQ0Y7cUJBQ0Y7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLFlBQVksQ0FBQyxRQUFRO29CQUN4QixJQUFJLENBQUMsSUFBSSxHQUFHLGtCQUFrQixDQUFDLGNBQWMsQ0FDM0MsK0NBQStDLENBQ2hELENBQUM7b0JBQ0YsSUFBSSxDQUFDLE1BQU0sR0FBRyxrQkFBa0IsQ0FBQyxjQUFjLENBQzdDLDZDQUE2QyxDQUM5QyxDQUFDO29CQUNGLElBQUksQ0FBQyxJQUFJLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQztvQkFDakMsTUFBTTtnQkFDUjtvQkFDRSxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7b0JBQ3pCLE1BQU07YUFDVDtTQUNGO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tbWFuZE5hbWVzLCBmaWx0ZXJUeXBlLCBoaXN0b3J5TmFtZXMsIG9iamVjdFR5cGVzIH0gZnJvbSAnLi4vY29uc3RzJztcbmltcG9ydCB7IFRyYW5zbGF0aW9uU2VydmljZSB9IGZyb20gJy4uL2kxOG4vdHJhbnNsYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyBnZXRGaWx0ZXJUeXBlIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZCc7XG5cbmV4cG9ydCBlbnVtIEhpc3RvcnlJdGVtVHlwZSB7XG4gIFNoYXBlID0gMCxcbiAgSWNvbiA9IDEsXG4gIFRleHQgPSAyLFxuICBNYXNrID0gMyxcbiAgQ3JvcCA9IDQsXG4gIERyYXcgPSA1LFxuICBSb3RhdGUgPSA2LFxuICBGbGlwID0gNyxcbiAgTG9hZCA9IDgsXG4gIERlbGV0ZSA9IDksXG4gIEltYWdlID0gMTAsXG4gIEFwcGx5RmlsdGVyID0gMTEsXG4gIFJlbW92ZUZpbHRlciA9IDEyLFxufVxuXG5leHBvcnQgY2xhc3MgSGlzdG9yeUl0ZW0ge1xuICB0eXBlOiBIaXN0b3J5SXRlbVR5cGU7XG4gIG5hbWU6IHN0cmluZztcbiAgZGV0YWlsOiBzdHJpbmc7XG4gIGFyZ3M6IGFueVtdO1xuICBmaWx0ZXJUeXBlPzogZmlsdGVyVHlwZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb21tYW5kOiBzdHJpbmcgfCBDb21tYW5kLFxuICAgIHRyYW5zbGF0aW9uU2VydmljZTogVHJhbnNsYXRpb25TZXJ2aWNlLFxuICAgIGltYWdlRWRpdG9yOiBhbnlcbiAgKSB7XG4gICAgaWYgKHR5cGVvZiBjb21tYW5kID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGNvbW1hbmQgPT09IGNvbW1hbmROYW1lcy5URVhUKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1nZW5lcmFsJ1xuICAgICAgICApO1xuICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1kZXRhaWxzJ1xuICAgICAgICApO1xuICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuVGV4dDtcbiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gY29tbWFuZE5hbWVzLk1BU0spIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1tYXNrLWdlbmVyYWwnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1tYXNrLWRldGFpbHMnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5NYXNrO1xuICAgICAgfSBlbHNlIGlmIChjb21tYW5kID09PSBjb21tYW5kTmFtZXMuQ1JPUCkge1xuICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWNyb3AnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5Dcm9wO1xuICAgICAgfSBlbHNlIGlmIChjb21tYW5kID09PSBjb21tYW5kTmFtZXMuRFJBVykge1xuICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWRyYXctZ2VuZXJhbCdcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWRyYXctZGV0YWlscydcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLkRyYXc7XG4gICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09IGNvbW1hbmROYW1lcy5JQ09OKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktaWNvbi1nZW5lcmFsJ1xuICAgICAgICApO1xuICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktaWNvbi1kZXRhaWxzJ1xuICAgICAgICApO1xuICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuSWNvbjtcbiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gY29tbWFuZE5hbWVzLkxPQUQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1sb2FkJ1xuICAgICAgICApO1xuICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuTG9hZDtcbiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gY29tbWFuZE5hbWVzLlNIQVBFKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3Rvcnktc2hhcGUtZ2VuZXJhbCdcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXNoYXBlLWRldGFpbHMnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5TaGFwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbW1hbmQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoY29tbWFuZC5uYW1lKSB7XG4gICAgICAgIGNhc2UgY29tbWFuZE5hbWVzLkZMSVBfSU1BR0U6XG4gICAgICAgICAgdGhpcy5uYW1lID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWZsaXAnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQuYXJnc1sxXSkge1xuICAgICAgICAgICAgY2FzZSAncmVzZXQnOlxuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktZmxpcC1yZXNldCdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmbGlwWCc6XG4gICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1mbGlwLWZsaXBYJ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2ZsaXBZJzpcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWZsaXAtZmxpcFknXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuRmxpcDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuUk9UQVRFX0lNQUdFOlxuICAgICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1yb3RhdGUnXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmRldGFpbCA9IGNvbW1hbmQuYXJnc1syXSArICfCsCc7XG4gICAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLlJvdGF0ZTtcbiAgICAgICAgICB0aGlzLmFyZ3MgPSBbY29tbWFuZC5hcmdzWzJdXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuQVBQTFlfRklMVEVSOlxuICAgICAgICAgIGlmIChjb21tYW5kLmFyZ3M/Lmxlbmd0aCA+PSAzICYmIGNvbW1hbmQuYXJnc1sxXSA9PT0gJ21hc2snKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1tYXNrLWdlbmVyYWwnXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1tYXNrLWFwcGx5J1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5NYXNrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1hcHBseUZpbHRlcidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmRldGFpbCA9IGdldEZpbHRlclR5cGUoY29tbWFuZC5hcmdzWzFdLCBjb21tYW5kLmFyZ3NbMl0pO1xuICAgICAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLkFwcGx5RmlsdGVyO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjb21tYW5kLmFyZ3NbMV0gPT09IGZpbHRlclR5cGUuUkVNT1ZFX0NPTE9SICYmXG4gICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1syXSAhPSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdGhpcy5maWx0ZXJUeXBlID1cbiAgICAgICAgICAgICAgICBjb21tYW5kLmFyZ3NbMl0udXNlQWxwaGEgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBmaWx0ZXJUeXBlLlJFTU9WRV9DT0xPUlxuICAgICAgICAgICAgICAgICAgOiBmaWx0ZXJUeXBlLlJFTU9WRV9XSElURTtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPVxuICAgICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1syXS51c2VBbHBoYSA9PSBudWxsXG4gICAgICAgICAgICAgICAgICA/IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1jb2xvckZpbHRlcidcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgOiB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItcmVtb3ZlV2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHRoaXMuYXJncyA9IFtjb21tYW5kLmFyZ3NbMl0uZGlzdGFuY2VdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkJMRU5EX0NPTE9SICYmXG4gICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1syXSAhPSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYXJnc1syXS5tb2RlID09PSAndGludCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclR5cGUgPSBmaWx0ZXJUeXBlLlRJTlQ7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci10aW50J1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzJdLm1vZGUgPT09ICdtdWx0aXBseScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclR5cGUgPSBmaWx0ZXJUeXBlLk1VTFRJUExZO1xuICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItbXVsdGlwbHknXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3NbMl0ubW9kZSA9PT0gJ2FkZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclR5cGUgPSBmaWx0ZXJUeXBlLkJMRU5EO1xuICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItYmxlbmQnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmFyZ3MgPSBbY29tbWFuZC5hcmdzWzJdLmNvbG9yXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1sxXSA9PT0gZmlsdGVyVHlwZS5OT0lTRSAmJlxuICAgICAgICAgICAgICBjb21tYW5kLmFyZ3NbMl0gIT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRoaXMuZmlsdGVyVHlwZSA9IGZpbHRlclR5cGUuTk9JU0U7XG4gICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLW5vaXNlJ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLmFyZ3MgPSBbY29tbWFuZC5hcmdzWzJdLm5vaXNlXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1sxXSA9PT0gZmlsdGVyVHlwZS5CUklHSFRORVNTICYmXG4gICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1syXSAhPSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdGhpcy5maWx0ZXJUeXBlID0gZmlsdGVyVHlwZS5CUklHSFRORVNTO1xuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1icmlnaHRuZXNzJ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLmFyZ3MgPSBbY29tbWFuZC5hcmdzWzJdLmJyaWdodG5lc3NdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLlBJWEVMQVRFICYmXG4gICAgICAgICAgICAgIGNvbW1hbmQuYXJnc1syXSAhPSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdGhpcy5maWx0ZXJUeXBlID0gZmlsdGVyVHlwZS5QSVhFTEFURTtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItcGl4ZWxhdGUnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHRoaXMuYXJncyA9IFtjb21tYW5kLmFyZ3NbMl0uYmxvY2tzaXplXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkdSQVlTQ0FMRSkge1xuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1ncmF5c2NhbGUnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQuYXJnc1sxXSA9PT0gZmlsdGVyVHlwZS5TRVBJQSkge1xuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1zZXBpYSdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkJMVVIpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItYmx1cidcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLklOVkVSVCkge1xuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1pbnZlcnQnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQuYXJnc1sxXSA9PT0gZmlsdGVyVHlwZS5WSU5UQUdFKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLXNlcGlhMidcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLlNIQVJQRU4pIHtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItc2hhcnBlbidcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkVNQk9TUykge1xuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1lbWJvc3MnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGNvbW1hbmROYW1lcy5SRU1PVkVfRklMVEVSOlxuICAgICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1yZW1vdmVGaWx0ZXInXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkJMRU5EX0NPTE9SKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclR5cGUgPSBmaWx0ZXJUeXBlLkJMRU5EX09SX1RJTlRfT1JfTVVMVElQTFk7XG4gICAgICAgICAgICB0aGlzLmRldGFpbCA9IGAke3RyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItdGludCdcbiAgICAgICAgICAgICl9IHwgJHt0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLW11bHRpcGx5J1xuICAgICAgICAgICAgKX0gfCAke3RyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1zdWJtZW51cy1maWx0ZXItYmxlbmQnXG4gICAgICAgICAgICApfWA7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3NbMV0gPT09IGZpbHRlclR5cGUuUkVNT1ZFX0NPTE9SKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclR5cGUgPSBmaWx0ZXJUeXBlLlJFTU9WRV9DT0xPUl9PUl9XSElURTtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gYCR7dHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1yZW1vdmVXaGl0ZSdcbiAgICAgICAgICAgICl9IHwgJHt0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLWNvbG9yRmlsdGVyJ1xuICAgICAgICAgICAgKX1gO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkdSQVlTQ0FMRSkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLWdyYXlzY2FsZSdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3NbMV0gPT09IGZpbHRlclR5cGUuU0VQSUEpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLXN1Ym1lbnVzLWZpbHRlci1zZXBpYSdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3NbMV0gPT09IGZpbHRlclR5cGUuQkxVUikge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLWJsdXInXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLklOVkVSVCkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLWludmVydCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3NbMV0gPT09IGZpbHRlclR5cGUuVklOVEFHRSkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLXNlcGlhMidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3NbMV0gPT09IGZpbHRlclR5cGUuU0hBUlBFTikge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLXNoYXJwZW4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5hcmdzWzFdID09PSBmaWx0ZXJUeXBlLkVNQk9TUykge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItc3VibWVudXMtZmlsdGVyLWVtYm9zcydcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5SZW1vdmVGaWx0ZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgY29tbWFuZE5hbWVzLkNIQU5HRV9TSEFQRTpcbiAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3Rvcnktc2hhcGUtZ2VuZXJhbCdcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChjb21tYW5kLmFyZ3M/Lmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICBsZXQgY2hhbmdlZFByb3BlcnRpZXMgPSBjb21tYW5kLmFyZ3NbMl07XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuc3Ryb2tlV2lkdGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXNoYXBlLXN0cm9rZVdpZHRoJ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2VkUHJvcGVydGllcy5zdHJva2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXNoYXBlLXN0cm9rZSdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlZFByb3BlcnRpZXMuZmlsbCkge1xuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3Rvcnktc2hhcGUtZmlsbCdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLlNoYXBlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGNvbW1hbmROYW1lcy5DSEFOR0VfSUNPTl9DT0xPUjpcbiAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktaWNvbi1nZW5lcmFsJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktaWNvbi1jb2xvckNoYW5nZSdcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5JY29uO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGNvbW1hbmROYW1lcy5DSEFOR0VfVEVYVF9TVFlMRTpcbiAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1nZW5lcmFsJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLlRleHQ7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29tbWFuZC5hcmdzPy5sZW5ndGggPj0gMyAmJlxuICAgICAgICAgICAgdHlwZW9mIGNvbW1hbmQuYXJnc1syXSA9PT0gJ29iamVjdCdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGxldCB0ZXh0U3R5bGVBcmcgPSBjb21tYW5kLmFyZ3NbMl07XG4gICAgICAgICAgICBpZiAodGV4dFN0eWxlQXJnLnRleHRBbGlnbikge1xuICAgICAgICAgICAgICBzd2l0Y2ggKHRleHRTdHlsZUFyZy50ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1zdHlsZUNoYW5nZS10ZXh0QWxpZ25tZW50LWxlZnQnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1zdHlsZUNoYW5nZS10ZXh0QWxpZ25tZW50LWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtc3R5bGVDaGFuZ2UtdGV4dEFsaWdubWVudC1yaWdodCdcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgdGV4dFN0eWxlQXJnLnRleHREZWNvcmF0aW9uIHx8XG4gICAgICAgICAgICAgIHRleHRTdHlsZUFyZy51bmRlcmxpbmUgIT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmICh0ZXh0U3R5bGVBcmcudW5kZXJsaW5lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1zdHlsZUNoYW5nZS11bmRlcmxpbmUtdHJ1ZSdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRleHRTdHlsZUFyZy51bmRlcmxpbmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1zdHlsZUNoYW5nZS11bmRlcmxpbmUtZmFsc2UnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXh0U3R5bGVBcmcuZm9udFN0eWxlKSB7XG4gICAgICAgICAgICAgIGlmICh0ZXh0U3R5bGVBcmcuZm9udFN0eWxlID09PSAnbm9ybWFsJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtc3R5bGVDaGFuZ2UtZm9udFN0eWxlLW5vcm1hbCdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRleHRTdHlsZUFyZy5mb250U3R5bGUgPT09ICdpdGFsaWMnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1zdHlsZUNoYW5nZS1mb250U3R5bGUtaXRhbGljJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGV4dFN0eWxlQXJnLmZvbnRXZWlnaHQpIHtcbiAgICAgICAgICAgICAgaWYgKHRleHRTdHlsZUFyZy5mb250V2VpZ2h0ID09PSAnbm9ybWFsJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtc3R5bGVDaGFuZ2UtZm9udFdlaWdodC1ub3JtYWwnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXh0U3R5bGVBcmcuZm9udFdlaWdodCA9PT0gJ2JvbGQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktdGV4dC1zdHlsZUNoYW5nZS1mb250V2VpZ2h0LWJvbGQnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXh0U3R5bGVBcmcuZm9udFNpemUpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtc3R5bGVDaGFuZ2UtZm9udFNpemUnLFxuICAgICAgICAgICAgICAgIHsgMDogdGV4dFN0eWxlQXJnLmZvbnRTaXplIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGV4dFN0eWxlQXJnLmZpbGwpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtZmlsbCdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgY29tbWFuZE5hbWVzLlJFTU9WRV9PQkpFQ1Q6XG4gICAgICAgICAgdGhpcy5uYW1lID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWRlbGV0ZSdcbiAgICAgICAgICApO1xuICAgICAgICAgIHN3aXRjaCAoY29tbWFuZC5hcmdzWzJdKSB7XG4gICAgICAgICAgICBjYXNlIGNvbW1hbmROYW1lcy5EUkFXOlxuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktZGVsZXRlLWRyYXcnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuU0hBUEU6XG4gICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kZWxldGUtc2hhcGUnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuSUNPTjpcbiAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWRlbGV0ZS1pY29uJ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29tbWFuZE5hbWVzLlRFWFQ6XG4gICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kZWxldGUtdGV4dCdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbW1hbmROYW1lcy5NQVNLOlxuICAgICAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktZGVsZXRlLW1hc2snXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuRGVsZXRlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGNvbW1hbmROYW1lcy5DTEVBUl9PQkpFQ1RTOlxuICAgICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kZWxldGUnXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmRldGFpbCA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kZWxldGUtYWxsJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLkRlbGV0ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuQUREX0lNQUdFX09CSkVDVDpcbiAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktbWFzay1nZW5lcmFsJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktbWFzay1hZGRlZCdcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMudHlwZSA9IEhpc3RvcnlJdGVtVHlwZS5JbWFnZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuQUREX1RFWFQ6XG4gICAgICAgICAgdGhpcy5uYW1lID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtZ2VuZXJhbCdcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LXRleHQtYWRkZWQnXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuVGV4dDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuU0VUX09CSkVDVF9QUk9QRVJUSUVTOlxuICAgICAgICAgIGlmIChjb21tYW5kLmFyZ3M/Lmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICBsZXQgb2JqZWN0SWQgPSBjb21tYW5kLmFyZ3NbMV07XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBpbWFnZUVkaXRvcj8uZ2V0T2JqZWN0UHJvcGVydGllcyhvYmplY3RJZCwgWyd0eXBlJ10pO1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zyhwcm9wcyk7XG4gICAgICAgICAgICBpZiAocHJvcHM/LnR5cGUpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIFtvYmplY3RUeXBlcy5saW5lLCBvYmplY3RUeXBlcy5zdHJhaWdodExpbmVdLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICBwcm9wcy50eXBlXG4gICAgICAgICAgICAgICAgKSA+IC0xXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kcmF3LWdlbmVyYWwnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuRHJhdztcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZFByb3BlcnRpZXMgPSBjb21tYW5kLmFyZ3NbMl07XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzPy5zdHJva2VXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kcmF3LXN0cm9rZVdpZHRoJyxcbiAgICAgICAgICAgICAgICAgICAgeyAwOiBjaGFuZ2VkUHJvcGVydGllcy5zdHJva2VXaWR0aCB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlZFByb3BlcnRpZXM/LnN0cm9rZSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1kcmF3LXN0cm9rZSdcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BzLnR5cGUgPT09IG9iamVjdFR5cGVzLmljb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAndHVpLWltYWdlLWVkaXRvci1hbmd1bGFyLWhpc3RvcnktaWNvbi1nZW5lcmFsJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gSGlzdG9yeUl0ZW1UeXBlLkljb247XG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZWRQcm9wZXJ0aWVzID0gY29tbWFuZC5hcmdzWzJdO1xuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcz8uZmlsbCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICd0dWktaW1hZ2UtZWRpdG9yLWFuZ3VsYXItaGlzdG9yeS1pY29uLWZpbGwnXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBjb21tYW5kTmFtZXMuQUREX0lDT046XG4gICAgICAgICAgdGhpcy5uYW1lID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWljb24tZ2VuZXJhbCdcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuZGV0YWlsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgJ3R1aS1pbWFnZS1lZGl0b3ItYW5ndWxhci1oaXN0b3J5LWljb24tYWRkZWQnXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnR5cGUgPSBIaXN0b3J5SXRlbVR5cGUuSWNvbjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aGlzLm5hbWUgPSBjb21tYW5kLm5hbWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=